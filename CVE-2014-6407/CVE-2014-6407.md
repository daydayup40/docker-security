##CVE-2014-6407 Archive extraction allowing host privilege escalation


##漏洞类
权限提升 远程代码执行


##漏洞分析
在docker1.3.1版本之前，docker pull和docker load的操作时，会存在解压文件到任意目录的漏洞。
这个漏洞是因为在镜像文件解压的时候软链接和硬链接穿越引起的。


这个漏洞能够导致远程代码执行和权限提升。
##具体分析
在docker pull和load的过程中，都会存在解压文件的过程，这个时候，如果压缩包中存在软链接和硬
链接，会产生软硬链接穿越(具体请参考软硬链接的区别，软链接可以任意穿越文件夹)，达到可以在
任意目录创建文件文件夹或者软链接等并可以执行相关代码


软链接穿越的利用可以参考这几篇利用:  
- [linux symbolic link attack tutorial](http://xteam.baidu.com/?p=175)  
- [CVE-2014-4877 wget ftp下载文件夹链接欺骗漏洞分析](http://xteam.baidu.com/?p=30) 



##漏洞验证方式
docker version <= 1.3.1 

##影响版本
docker version <= 1.3.1 


##修复方案
docker 1.3.2中，docker采用在chroot里面进行镜像解压，并在pkg/archive中增加检查


##参考链接
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-6407
- http://www.openwall.com/lists/oss-security/2014/11/24/5

